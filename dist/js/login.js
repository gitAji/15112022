import"./listings.js";const c="https://nf-api.onrender.com/api/v1",d="/auction/auth/login",m=`${c}${d}`,u=document.getElementById("loginBtn");document.getElementById("userName");function g(){u.addEventListener("click",t=>{t.preventDefault();const n=document.getElementById("email").value.trim(),r=document.getElementById("password").value.trim();n===""?emailError.innerHTML="Email is required":(n.includes!="noroff.no",emailError.innerHTML="Please enter your student email address."),r===""?passwordError.innerHTML="Password is required":r.length<8?passwordError.innerHTML="Password is too short.":(userMessage.innerHTML="",emailError.innerHTML="",passwordError.innerHTML="");const s={email:n,password:r};console.log(s);async function i(a,l){try{const e=await fetch(a,{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}),o=await e.json();if(console.log(o),console.log(e),e.status===200){const f=localStorage.setItem("username",o.name),E=localStorage.setItem("accessToken",o.accessToken),T=localStorage.setItem("credits",o.credits);window.location.href="profile.html",setTimeout(()=>{form.reset(),emailError.innerHTML=""},500)}else userMessage.innerHTML=o.status}catch(e){console.log(e)}}i(m,s)})}g();
