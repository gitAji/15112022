import"./alert.js";import"./listings.js";const A="https://nf-api.onrender.com/api/v1",P="/auction/listings",w=`${A}${P}`,l=document.getElementById("title"),a=document.getElementById("description"),d=document.getElementById("tags"),m=document.getElementById("media"),u=document.getElementById("end-time"),S=document.getElementById("post-form"),g=document.getElementById("title-error"),p=document.getElementById("description-error"),E=document.getElementById("tags-error"),T=document.getElementById("media-error"),y=document.getElementById("end-time-error"),t=document.getElementById("userMessage"),b=document.getElementById("post");document.getElementById("post");document.getElementById("post-form");const f=localStorage.getItem("accessToken");function q(){b.addEventListener("click",async I=>{I.preventDefault(),console.log("form is submitted!"),console.log(f),l.value.trim()===""?g.innerHTML="Title is required":g.innerHTML="",a.value.trim()===""?p.innerHTML="Description is required":p.innerHTML="",d.value.trim()===""?E.innerHTML="Tags is required":E.innerHTML="",m.value.trim()===""?T.innerHTML="Media is required":T.innerHTML="",u.value.trim()===""?y.innerHTML="End time is required":y.innerHTML="";const v=l.value.trim(),B=a.value.trim(),M=d.value.trim().split(","),L=m.value.trim().split(","),H=u.value.trim(),n=new Date(H).toISOString();console.log(n);const o={title:v,description:B,tags:M,media:L,endsAt:n};console.log(o);async function h(s,i){try{const c={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(i)};console.log(s,i,c);const e=await fetch(s,c);console.log(e);const k=await e.json();console.log(k),e.ok?e.ok&&(t.innerHTML=`
                        <div class="text-success">
                            <b>Post created successfully</b>
                        </div>
                        `,setTimeout(()=>{S.reset(),t.innerHTML=""},3e3)):t.innerHTML=`
                        <div class="text-danger">
                            <b>Please check image url </b>
                        </div>
                        `}catch(r){console.warn(r)}}h(w,o)})}q();f||(window.location.href="./login.html");
